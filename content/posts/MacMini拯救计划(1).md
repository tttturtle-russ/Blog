+++
title = 'Mac Mini 拯救计划(1): 旁路由'
date = 2024-07-15T06:58:29+08:00
draft = false
+++

## 0xffff. 前记
关于标题为什么叫Mac Mini拯救计划，是我的Mac Mini在我去年脑袋一热买下之后就没怎么发挥过它该有的生产力（没怎么开过机），自从搬家之后，就一直躺在显示器后面吃灰，终于有一天我觉得不能再这样下去了，好歹也是3000多大洋啊，所以我开始了我的Mac Mini拯救计划，我要一步步榨干MacOS的生产力。


## 0x0. 旁路由改造
榨干Mac的第一步，当然要从网络开始，由于我宿舍的网速过于垃圾，年前我给寝室配备了一台路由器，准确来说，是从家里嫖的，反正家里两个路由器对我爸妈来说也用不上。我带来的路由器是华为的AX3路由器，原本想着刷入OpenWRT系统玩玩的，带过来才发现，没有合适的固件，遂放弃。但是这并不能阻挡我改造宿舍网络的脚步，主路由不能装插件，旁路由可以嘛，这时候就是Mac展现身手的时候了。方案很简单，AX3做主路由，Mac Mini做网关旁路由，所有流量均经过Mac Mini上运行的代理，这样一来就可以实现移动设备不翻墙也可以绕过GFW的效果了。

## 0x1. 安装ClashX
网上普遍推荐的是使用[Surge](https://nssurge.com/)来进行配置，但是有个很严重的问题就是：贵！太贵了，所以我选择了免费的ClashX进行配置，安装步骤很简单这里就略过，需要注意的是安装和导入配置之后，要打开ClashX的增强模式和全局代理，否则的话可能会失败。

## 0x2. 修改WIFI设置
连接上WIFI后，在设置->WIFI->详细信息->TCP/IP->配置IPV4中，将使用DHCP修改为手动，然后手动配置IP地址，子网掩码和路由器地址，这里的路由器地址可以在路由器背面的标签上找到，我这里的IP地址为192.168.1.1，子网掩码一概设置为255.255.255.0，IP地址只需修改路由器IP地址的最后一位，在2-255之间选一个数填入即可，如图1所示。

![](/img/Mac-Mini-拯救计划-1-旁路由/1.jpg)

> 可能有部分设备会出现修改为静态IP后连不上网的情况，对于这种情况可以不使用静态IP，在路由器管理界面中配置静态IP地址绑定列表，将Mac的设备和192.168.1.2绑定即可，WIFI设置中依然使用DHCP，这样即使使用DHCP路由器也会每次给你分配192.168.1.2这个IP
> ![](/img/Mac-Mini-拯救计划-1-旁路由/2.jpg)

到这Mac上的设置步骤就完成了，下面要进行路由器的设置。

## 0x3. 修改路由器DHCP
这一步有两个选项，需要你根据你的路由器能否配置DHCP网关来决定使用哪种方法。如果你的路由器支持配置DHCP网关，则选择方法一，否则选择方法二。由于聪明的华为开发者们追求精简，所以AX3中没有配置DHCP这一选择，故我这里进行方法二。

- 方法一：
在路由器后台设置DHCP网关，将其改为刚刚MacMini设定的静态地址，子网掩码设置为255.255.0.0，DNS服务器也修改为Man的地址，然后保存重启路由器即可。

- 方法二：
不修改路由器设置，在连接的设备上进行手动配置，这里以我的iPhone为例。连接上WIFI后，在设置->WLAN->已连接WIFI的右边感叹号，然后configure IP和 configure DNS，将掩码改为255.255.0.0，路由器和DNS改为Mac的IP地址即可。

## 0x4. 完成
到这里为止Mac的旁路由设置就配置完成了，愉快开始使用吧！

## Ref
[Mac 电脑使用 ClashX Pro 作为网关旁路由](https://qust.me/post/clashxProMac/)